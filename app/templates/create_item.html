<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Idébanken</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" src="static/font/roboto">
  <!-- Bootstrap core CSS -->
  <link href="static/css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="static/css/mdb.min.css" rel="stylesheet">
  <!-- Your custom styles (optional) -->
   <link href="static/css/style.css" rel="stylesheet">
  <!-- DataTables Select CSS -->
  <link href="static/css/addons/datatables.min.css" rel="stylesheet">
 
</head>
<body align="center">
<div class="bg-img">
<form action="/do_create_item" method="POST" class="text-center border border-light p-5">
    

    <fieldset class="pure-group">
        <legend><h3>Dina kontaktuppgifter</h3></legend>
        <input type="text" class="form-control mb-4" placeholder="Namn" name="name"required>
        <input type="email" class="form-control mb-4" placeholder="E-post" name="emailaddress"required>
        <input type="text" class="form-control mb-4" placeholder="Telefon" name="cellphone"required>
    </fieldset>

    <fieldset class="pure-group">
        <legend><h3>Ditt förslag</h3></legend>
        <input type="text" class="form-control mb-4" placeholder="Namn på idé / förslag" name="itemname"required>
        <textarea class="form-control mb-4" rows="5" placeholder="Beskrivning av ditt förslag" name="itemdescr" required></textarea>
    </fieldset>

    <fieldset class="pure-group">
        <legend><h3>Besvara dessa frågor (frivilligt) </h3></legend>
        <textarea class="form-control mb-4" rows="4" placeholder="Vilket problem löser ditt förslag?" name="itemsolves"></textarea>
        <textarea class="form-control mb-4" rows="4" placeholder="Vad blir resultatet av ditt förslag?" name="itemresults"></textarea>
    </fieldset>
    <br>
    <button id ="myBtn" type="submit" class="btn btn-info btn-block">Skicka</button>
</form>
</div>
<script>
  var textarea = document.querySelector('textarea');

textarea.addEventListener('keydown', autosize);
             
function autosize(){
  var el = this;
  setTimeout(function(){
    el.style.cssText = 'height:auto; padding:0';
    // for box-sizing other than "content-box" use:
    // el.style.cssText = '-moz-box-sizing:content-box';
    el.style.cssText = 'height:' + el.scrollHeight + 'px';
  },0);
}
   //This is the first load of is valid, just in case the user gets back again with old inputs
   //if all the required inputs are filled enable the button
   var isValid = true;
     $('input,textarea,select').filter('[required]:visible').each(function() {
      if ( $(this).val() === '' )
         isValid = false;
    });
    if( isValid ) {
       $('#myBtn').prop('disabled', false);
    } else {
       $('#myBtn').prop('disabled', true);
    };
    $('#myBtn').click(function() {
        var isValid = true;
         $('input,textarea,select').filter('[required]:visible').each(function() {
          if ( $(this).val() === '' )
             isValid = false;
        });
        if( isValid ) {
           $("/do_create_item")[0].submit(); 
       };

    });
    
    //When a input is changed check all the inputs and if all are filled, enable the button
     $('input,textarea,select').change(function() {
        var isValid = true;
         $('input,textarea,select').filter('[required]:visible').each(function() {
          if ( $(this).val() === '' )
             isValid = false;
        });
        if( isValid ) {
           $('#myBtn').prop('disabled', false);
        } else {
           $('#myBtn').prop('disabled', true);
        };
    });
    
    //In case the user edits the button with firebug and removes disabled, check
    $('#myBtn').click(function() {
         var isValid = true;
         $('input,textarea,select').filter('[required]:visible').each(function() {
          if ( $(this).val() === '' )
             isValid = false;
        });
        if( isValid ) {
           $("/do_create_item")[0].submit(); 
       };
    });

</script>

 <script type="text/javascript" src="static/js/jquery-3.3.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="static/js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="static/js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="static/js/mdb.js"></script>

  <!-- DataTables Select CSS -->
  <!-- MDBootstrap Datatables  -->
<script type="text/javascript" src="static/js/addons/datatables.min.js"></script>

</body>
</html>